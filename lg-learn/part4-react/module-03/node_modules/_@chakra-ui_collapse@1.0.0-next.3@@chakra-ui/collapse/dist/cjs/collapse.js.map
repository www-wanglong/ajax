{"version":3,"sources":["../../src/collapse.tsx"],"names":["Collapse","React","forwardRef","props","forwardedRef","isOpen","children","config","startingHeight","animateOpacity","className","htmlStyle","style","timeout","easing","rest","getStr","property","transition","useState","hidden","setHidden","child","_child","Children","only","ref","useRef","rect","height","styles","init","opacity","entered","transform","exiting","enter","exit","overflow","willChange","cloneElement","__DEV__","displayName"],"mappings":"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","sourcesContent":["import { chakra, PropsOf, forwardRef } from \"@chakra-ui/system\"\nimport {\n  Transition,\n  TransitionProps,\n  TransitionStyles,\n} from \"@chakra-ui/transition\"\nimport { ariaAttr, cx, mergeRefs, __DEV__ } from \"@chakra-ui/utils\"\nimport { useRect } from \"@reach/rect\"\nimport * as React from \"react\"\n\nexport type CollapseProps = PropsOf<typeof chakra.div> & {\n  /**\n   * If `true`, the content will be visible\n   */\n  isOpen?: boolean\n  /**\n   * The height you want the content in it's collapsed state.\n   * @default 0\n   */\n  startingHeight?: number\n  /**\n   * Custom styles for the Transition component's appear, entered and exiting states\n   */\n  config?: TransitionProps[\"styles\"]\n  /**\n   * If `true`, the opacity of the content will be animated\n   * @default true\n   */\n  animateOpacity?: boolean\n  /**\n   * The CSS `transition-duration` (in ms) to apply for the collapse animation\n   *\n   * @default\n   * 150\n   */\n  timeout?: number\n  /**\n   * The CSS `transition-timing-function` to apply for the collapse animation\n   *\n   * @default\n   * \"ease\"\n   */\n  easing?: string\n}\n\nexport const Collapse = React.forwardRef(function Collapse(\n  props: CollapseProps,\n  forwardedRef: React.Ref<any>,\n) {\n  const {\n    isOpen,\n    children,\n    config,\n    startingHeight = 0,\n    animateOpacity = true,\n    className,\n    style: htmlStyle,\n    timeout = 150,\n    easing = \"ease\",\n    ...rest\n  } = props\n\n  const getStr = (property: string) => `${property} ${timeout}ms ${easing}`\n\n  const transition = `${getStr(\"height\")}, ${getStr(\"opacity\")}, ${getStr(\n    \"transform\",\n  )}`\n\n  const [hidden, setHidden] = React.useState(true)\n\n  type ChildElement = React.ReactElement<{ ref: React.Ref<any> }>\n\n  let child = children\n\n  if (typeof children === \"string\") {\n    child = <div>{children}</div>\n  }\n\n  const _child = React.Children.only(child) as ChildElement\n\n  const ref = React.useRef<HTMLDivElement>(null)\n\n  const rect = useRect(ref, true)\n  const height = rect?.height ?? 0\n\n  const styles: TransitionStyles = {\n    init: {\n      height: startingHeight,\n      opacity: startingHeight ? 1 : 0,\n    },\n    entered: {\n      height,\n      opacity: 1,\n      transform: \"translateY(0)\",\n    },\n    exiting: {\n      height: startingHeight,\n      opacity: startingHeight ? 1 : 0,\n      transform: startingHeight > 0 ? \"translateY(0)\" : \"translateY(-0.5rem)\",\n    },\n  }\n\n  return (\n    <Transition\n      in={isOpen}\n      styles={config || styles}\n      onEntered={() => setHidden(false)}\n      onExited={() => setHidden(true)}\n      timeout={{ enter: 0, exit: timeout }}\n      transition={transition}\n      unmountOnExit={false}\n    >\n      {(styles) => (\n        <chakra.div\n          ref={forwardedRef}\n          className={cx(\"chakra-collapse\", className)}\n          aria-hidden={ariaAttr(hidden)}\n          {...rest}\n          style={{\n            ...styles,\n            overflow: \"hidden\",\n            opacity: animateOpacity ? styles.opacity : 1,\n            willChange: \"height, opacity, transform\",\n            ...htmlStyle,\n          }}\n        >\n          {React.cloneElement(_child, {\n            ref: mergeRefs(ref, _child.props.ref),\n          })}\n        </chakra.div>\n      )}\n    </Transition>\n  )\n})\n\nif (__DEV__) {\n  Collapse.displayName = \"Collapse\"\n}\n"],"file":"collapse.js"}