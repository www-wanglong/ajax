# 一、理念
## 1. React理念
### 1.1 制约快速响应的因素：
- CPU瓶颈（当遇到大量计算的操作或设备性能不足使页面调帧）
- IO的瓶颈（网络请求）
### 1.2 CPU瓶颈
主流浏览器的刷新频率为60HZ，即每16.6ms浏览器刷新一次。

在16.6ms时间内，需要完成：JS脚本执行 -> 样式布局 -> 样式绘制。

当JS执行时间过长，超出16.6ms，这次刷新就没有时间执行样式布局喝样式绘制了。页面掉帧，造成卡顿。


React如何解决这个问题？

在浏览器每一帧的时间中，预留一些时间给JS线程,`React`利用这部分时间更新组件。当时间不够用时，`React`将线程控制权还给浏览器渲染UI。

关键是：将同步的更新变为可中断的异步更新。

### 1.3 IO的瓶颈

## 2. 老的React架构

### 2.1 React15架构
- Reconciler（协调器） - 负责找出变化的组件
- Renderer（渲染器）- 负责将变化的组件渲染到组件上

### 2.2  Reconciler（协调器）
- 调用函数组件、或class组件的`render`方法，将返回的JSX转化为虚拟DOM
- 将虚拟DOM和上次更新时的虚拟DOM 对比
- 通过对比Renderer找出本次更新中变化的虚拟DOM
- 通知Renderer将变化的虚拟DOM渲染到页面上
### 2.3  Renderer（渲染器）
ReactDOM

### 2.4 架构的缺点
采用递归跟新组件，一旦开始，中途无法中断。